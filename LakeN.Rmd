---
title: "LakeN"
author: "Yoav Ben Dor"
date: "6.12.2016"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

```

## Lake N model
# Yoav Ben Dor

This model was written as a project for course 68806 Eco-hydrologic modelling with R
This model illustrates the annual N cycle in a lake in northern Israel, and simulates the transitions from oxydized species into reduced species

```{r }
# setwd("C:/Users/user/Documents/LakeN")
library(plyr)
library(LakeN)

# read the data for the model
# use the read.table function in the cas of a tab=delimited text file
# use the read.csv function for a , delimited text file
data1=read.table("LakeNData1.txt", header=TRUE)
data2=read.table("LakeNData2.txt", header=TRUE)
data3=read.table("LakeNData3.txt", header=TRUE)
data4=read.table("LakeNData4.txt", header=TRUE)

#split the data set by measurment date
data1.split=split(data1, f=data1$Date)

```

# use the function depthinterp to interpolate the data into uniform length for every m
```{r , echo=FALSE}
data1.split.interp=vector(mode="list", length=length(data1.split))

for (ii in 1:length(data1.split)){
  data1.split.interp[[ii]]=depthinterp(input=data1.split[[ii]])
}
```

# demonstrate some interpolations
```{r , echo=FALSE}
plot(data1.split[[1]]$Oxygen,data1.split[[1]]$Depth,  
     main="data interpolation demonstration",ylab="Depth [m]", xlab="Oxygen [mol/l]",
     ylim=rev(range(data1.split.interp[[1]]$Depth)), xlim=c(0, max(data1.split[[1]]$Oxygen)))
lines(data1.split.interp[[1]]$Oxygen,data1.split.interp[[1]]$Depth,  col=2)

legend(0, 1, c("Measured", "Interpolation"), col = c(1, 2),
      lty = c(NA,1), pch = c(1, NA),
       merge = TRUE, bg = "gray90")

plot(data1.split[[1]]$Nitrate,data1.split[[1]]$Depth,  
     main="data interpolation demonstration",ylab="Depth [m]", xlab="Nitrate/NH4 [mol/l]",
     ylim=rev(range(data1.split.interp[[1]]$Depth)), xlim=c(0,max(c(max(data1.split[[1]]$Nitrate),max(data1.split[[1]]$NH4)))), col=1)
lines(data1.split.interp[[1]]$Nitrate,data1.split.interp[[1]]$Depth,  col=2)
points(data1.split[[1]]$NH4,data1.split[[1]]$Depth, col=3)
lines(data1.split.interp[[1]]$NH4,data1.split.interp[[1]]$Depth,  col=4)

legend(0.3, 1, c("Measured NO2", "Interpolation","Measured NH4", "Interpolation"), col = c(1, 2,3,4),
      lty = c(NA,1,NA,1), pch = c(1,NA,1,NA),
       merge = TRUE, bg = "gray90")

```

## title

text

```{r ,echo=FALSE}
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
